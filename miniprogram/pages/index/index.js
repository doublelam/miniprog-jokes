"use strict";
var app = getApp();
Page({
    data: {
        jokes: [],
        err: '',
        loading: false,
    },
    onLoad: function () {
        this.getJokes();
    },
    getJokes: function () {
        var _this = this;
        this.setData({
            loading: true,
        });
        wx.request({
            url: 'https://hn216.api.yesapi.cn/?s=App.Common_Joke.RandOne',
            method: 'POST',
            data: {
                app_key: '4C08E3A055F95802966332B150220518',
                num: 1,
            },
            success: function (data) {
                console.log('dats', data.data);
                var jokes = data.data.data.joke.map(function (v) { return ({
                    title: v[0].slice(0, 5) + '...',
                    content: v,
                }); });
                _this.setData({
                    err: '',
                    loading: false,
                    jokes: jokes,
                });
            },
            fail: function (e) {
                _this.setData({
                    err: e.errMsg,
                    loading: false,
                });
            }
        });
    },
    copyJoke: function () {
        wx.setClipboardData({
            data: this.data.jokes[0].content[0],
            success: function (_) {
                wx.showToast({
                    title: '已复制到粘贴版',
                    icon: 'success',
                });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUEsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFjLENBQUE7QUFDaEMsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osS0FBSyxFQUFFLEVBQTBDO1FBQ2pELEdBQUcsRUFBRSxFQUFFO1FBQ1AsT0FBTyxFQUFFLEtBQUs7S0FDZjtJQUVELE1BQU07UUFDSixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUNELFFBQVE7UUFBUixpQkE4QkM7UUE3QkMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLE9BQU8sRUFBRSxJQUFJO1NBQ2QsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULEdBQUcsRUFBRSx3REFBd0Q7WUFDN0QsTUFBTSxFQUFFLE1BQU07WUFDZCxJQUFJLEVBQUU7Z0JBQ0osT0FBTyxFQUFFLGtDQUFrQztnQkFDM0MsR0FBRyxFQUFFLENBQUM7YUFDUDtZQUNELE9BQU8sRUFBRSxVQUFDLElBQUk7Z0JBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUM5QixJQUFNLEtBQUssR0FBSSxJQUFJLENBQUMsSUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQUMsQ0FBUyxJQUFLLE9BQUEsQ0FBQztvQkFDN0QsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUs7b0JBQy9CLE9BQU8sRUFBRSxDQUFDO2lCQUNYLENBQUMsRUFINEQsQ0FHNUQsQ0FBQyxDQUFBO2dCQUNILEtBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1gsR0FBRyxFQUFFLEVBQUU7b0JBQ1AsT0FBTyxFQUFFLEtBQUs7b0JBQ2QsS0FBSyxPQUFBO2lCQUNOLENBQUMsQ0FBQztZQUNMLENBQUM7WUFDRCxJQUFJLEVBQUUsVUFBQyxDQUFDO2dCQUNOLEtBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1gsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNO29CQUNiLE9BQU8sRUFBRSxLQUFLO2lCQUNmLENBQUMsQ0FBQztZQUNMLENBQUM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsUUFBUTtRQUNOLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztZQUNsQixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNuQyxPQUFPLFlBQUMsQ0FBQztnQkFDUCxFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNYLEtBQUssRUFBRSxTQUFTO29CQUNoQixJQUFJLEVBQUUsU0FBUztpQkFDaEIsQ0FBQyxDQUFBO1lBQ0osQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbmRleC50c1xuLy8g6I635Y+W5bqU55So5a6e5L6LXG5jb25zdCBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKVxuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICBqb2tlczogW10gYXMgeyB0aXRsZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdLFxuICAgIGVycjogJycsXG4gICAgbG9hZGluZzogZmFsc2UsXG4gIH0sXG4gIC8vIOS6i+S7tuWkhOeQhuWHveaVsFxuICBvbkxvYWQoKSB7XG4gICAgdGhpcy5nZXRKb2tlcygpO1xuICB9LFxuICBnZXRKb2tlcygpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICB9KTtcbiAgICB3eC5yZXF1ZXN0KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vaG4yMTYuYXBpLnllc2FwaS5jbi8/cz1BcHAuQ29tbW9uX0pva2UuUmFuZE9uZScsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYXBwX2tleTogJzRDMDhFM0EwNTVGOTU4MDI5NjYzMzJCMTUwMjIwNTE4JyxcbiAgICAgICAgbnVtOiAxLFxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdkYXRzJywgZGF0YS5kYXRhKVxuICAgICAgICBjb25zdCBqb2tlcyA9IChkYXRhLmRhdGEgYXMgYW55KS5kYXRhLmpva2UubWFwKCh2OiBzdHJpbmcpID0+ICh7XG4gICAgICAgICAgdGl0bGU6IHZbMF0uc2xpY2UoMCwgNSkgKyAnLi4uJyxcbiAgICAgICAgICBjb250ZW50OiB2LFxuICAgICAgICB9KSlcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICBlcnI6ICcnLFxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIGpva2VzLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBmYWlsOiAoZSkgPT4ge1xuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgIGVycjogZS5lcnJNc2csXG4gICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBjb3B5Sm9rZSgpIHtcbiAgICB3eC5zZXRDbGlwYm9hcmREYXRhKHtcbiAgICAgIGRhdGE6IHRoaXMuZGF0YS5qb2tlc1swXS5jb250ZW50WzBdLFxuICAgICAgc3VjY2VzcyhfKSB7XG4gICAgICAgIHd4LnNob3dUb2FzdCh7XG4gICAgICAgICAgdGl0bGU6ICflt7LlpI3liLbliLDnspjotLTniYgnLFxuICAgICAgICAgIGljb246ICdzdWNjZXNzJyxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KVxuIl19